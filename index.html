<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baby Shower - Invitación Digital</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Pantalla de Inicio: Selección de Género -->
    <div id="genderScreen" class="screen active">
        <div class="container">
            <div class="header">
                <h1 class="main-title">Baby Shower</h1>
                <p>Crea tu invitación digital</p>
            </div>
            
            <div class="gender-selection">
                <button class="gender-btn boy" data-gender="M">
                    <svg viewBox="0 0 100 100" width="80" height="80" fill="currentColor">
                        <!-- Cabeza -->
                        <circle cx="50" cy="22" r="12"/>
                        <!-- Cuerpo -->
                        <rect x="35" y="36" width="30" height="22" rx="4"/>
                        <!-- Pantalón -->
                        <rect x="36" y="58" width="12" height="24" rx="3"/>
                        <rect x="52" y="58" width="12" height="24" rx="3"/>
                        <!-- Brazos -->
                        <rect x="28" y="38" width="6" height="18" rx="3"/>
                        <rect x="66" y="38" width="6" height="18" rx="3"/>
                    </svg>
                    <span>Niño</span>
                </button>
                <button class="gender-btn girl" data-gender="F">
                    <svg viewBox="0 0 100 100" width="80" height="80" fill="currentColor">
                        <!-- Cabeza -->
                        <circle cx="50" cy="22" r="12"/>
                        <!-- Moños decorativos -->
                        <ellipse cx="38" cy="18" rx="6" ry="4" opacity="0.8"/>
                        <ellipse cx="62" cy="18" rx="6" ry="4" opacity="0.8"/>
                        <!-- Cuerpo -->
                        <rect x="35" y="36" width="30" height="16" rx="4"/>
                        <!-- Vestido (forma de trapecio) -->
                        <path d="M32 52 L35 52 L38 78 Q38 82 42 82 L58 82 Q62 82 62 78 L65 52 L68 52 L64 78 Q64 84 58 84 L42 84 Q36 84 36 78 Z" />
                        <!-- Brazos -->
                        <rect x="26" y="38" width="8" height="16" rx="4"/>
                        <rect x="66" y="38" width="8" height="16" rx="4"/>
                    </svg>
                    <span>Niña</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Pantalla de Colores -->
    <div id="colorScreen" class="screen has-floating-btn">
        <button class="floating-action-btn" onclick="nextScreen('effectsScreen')">
            <span>Continuar</span>
            <span>→</span>
        </button>
        <div class="container">
            <div class="header">
                <button class="back-btn" onclick="goBack('genderScreen')">← Atrás</button>
                <h2>Elige el color</h2>
            </div>
            
            <div id="colorOptions" class="color-grid"></div>
        </div>
    </div>

    <!-- Pantalla de Efectos -->
    <div id="effectsScreen" class="screen has-floating-btn">
        <button class="floating-action-btn" onclick="nextScreen('themeScreen')">
            <span>Continuar</span>
            <span>→</span>
        </button>
        <div class="container">
            <div class="header">
                <button class="back-btn" onclick="goBack('colorScreen')">← Atrás</button>
                <h2>Efectos Flotantes</h2>
                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 12px; max-width: 400px; margin-left: auto; margin-right: auto; line-height: 1.5;">Personaliza tu invitación seleccionando hasta 3 efectos decorativos</p>
            </div>
            
            <div id="effectsOptions" class="effects-grid"></div>
            
            <div class="selected-effects">
                <p>Efectos seleccionados: <span id="effectCount">0</span>/3</p>
                <div id="selectedEffectsList" class="selected-effects-list"></div>
            </div>
        </div>
    </div>

    <!-- Pantalla de Temas -->
    <div id="themeScreen" class="screen has-floating-btn">
        <button class="floating-action-btn" onclick="nextScreen('adminScreen')">
            <span>Continuar</span>
            <span>→</span>
        </button>
        <div class="container">
            <div class="header">
                <button class="back-btn" onclick="goBack('effectsScreen')">← Atrás</button>
                <h2>Estilo de Invitación</h2>
                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 12px; max-width: 420px; margin-left: auto; margin-right: auto; line-height: 1.5;">Elige el estilo tipográfico que mejor represente tu celebración</p>
            </div>
            
            <div id="themeOptions" class="theme-grid"></div>
        </div>
    </div>

    <!-- Pantalla de Administrador: Formulario de Invitación -->
    <div id="adminScreen" class="screen">
        <div class="container">
            <div class="header">
                <button class="back-btn" onclick="goBack('themeScreen')">← Atrás</button>
                <h2>Completa la información</h2>
            </div>
            
            <form id="invitationForm" class="form">
                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0012.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.225 8.225 0 012.41 5.83c0 4.54-3.7 8.23-8.24 8.23-1.48 0-2.93-.39-4.19-1.15l-.3-.17-3.12.82.83-3.04-.2-.32a8.188 8.188 0 01-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31-.22.25-.87.85-.87 2.07 0 1.22.89 2.39 1 2.56.14.17 1.76 2.67 4.25 3.73.59.27 1.05.42 1.41.53.59.19 1.13.16 1.56.1.48-.07 1.46-.6 1.67-1.18.21-.58.21-1.07.15-1.18-.07-.1-.23-.15-.48-.27-.25-.11-1.47-.72-1.69-.81-.23-.08-.37-.12-.56.12-.16.25-.64.81-.78.97-.15.17-.29.19-.53.07-.26-.13-1.06-.39-2-1.23-.74-.66-1.23-1.47-1.38-1.72-.14-.25-.02-.39.11-.51.11-.11.25-.29.37-.44.13-.14.17-.25.25-.41.08-.17.04-.31-.02-.43-.06-.11-.56-1.35-.77-1.84-.2-.48-.4-.42-.56-.43-.14 0-.3-.01-.46-.01z"/>
                        </svg>
                        WhatsApp de Contacto
                    </h3>
                    <div class="phone-input">
                        <input type="text" id="countryCode" value="+51" maxlength="4" placeholder="+51">
                        <input type="tel" id="phoneNumber" placeholder="987654321" required>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <circle cx="12" cy="8" r="4"/>
                            <path d="M12 11c-4 0-8 2-8 5v2h16v-2c0-3-4-5-8-5z"/>
                        </svg>
                        Información del Bebé
                    </h3>
                    <input type="text" id="babyName" placeholder="Nombre del bebé" required>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M16 4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2s.89-2 2-2 2 .89 2 2zm4 18v-6c0-1.1-.9-2-2-2h-3l-1-3h-2l-1 3H8c-1.1 0-2 .9-2 2v6h2v-6h2.5l1.5 5h4l1.5-5H20v6h2zM7.5 6.5C7.5 8.43 5.93 10 4 10S.5 8.43.5 6.5 2.07 3 4 3s3.5 1.57 3.5 3.5zM8 22v-6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v6h2v-6h2.5l1.5 5h2z"/>
                        </svg>
                        Padres
                    </h3>
                    <input type="text" id="fatherName" placeholder="Nombre del papá" required>
                    <input type="text" id="motherName" placeholder="Nombre de la mamá" required>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z"/>
                        </svg>
                        Fecha y Hora del Evento
                    </h3>
                    <div class="date-time-modern">
                        <div class="input-modern">
                            <label for="eventDate">Fecha</label>
                            <input type="date" id="eventDate" required>
                        </div>
                        <div class="input-modern">
                            <label for="eventTime">Hora</label>
                            <input type="time" id="eventTime" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"/>
                        </svg>
                        Ubicación
                    </h3>
                    <input type="text" id="address" placeholder="Dirección del evento" required>
                    <div class="map-links-input">
                        <input type="url" id="googleMapsLink" placeholder="Enlace de Google Maps (opcional)">
                        <input type="url" id="wazeLink" placeholder="Enlace de Waze (opcional)">
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                        Mensaje de Invitación
                    </h3>
                    <textarea id="invitationMessage" rows="4" placeholder="Escribe un mensaje especial para tus invitados..." required></textarea>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 00-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
                        </svg>
                        Lista de Regalos
                    </h3>
                    <div class="gift-options">
                        <label class="radio-option">
                            <input type="radio" name="giftList" value="default" checked>
                            <span>Usar lista por defecto (10 regalos aleatorios)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="giftList" value="custom">
                            <span>Agregar mi propia lista</span>
                        </label>
                    </div>
                    <div id="customGiftList" class="custom-gifts hidden">
                        <textarea id="customGifts" rows="6" placeholder="Escribe cada regalo en una línea nueva&#10;Ejemplo:&#10;Pañales&#10;Biberón&#10;Ropa de bebé"></textarea>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Generar Invitación</button>
            </form>
        </div>
    </div>

    <!-- Pantalla de Vista Previa y Compartir -->
    <div id="previewScreen" class="screen">
        <div class="container">
            <div class="header">
                <h2>¡Tu invitación está lista!</h2>
            </div>
            
            <div class="preview-card" id="previewCard"></div>
            
            <div class="share-section">
                <input type="text" id="shareLink" readonly>
                <button class="copy-btn" onclick="copyLink()">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2h2v-2h-2v2zm0-4h2V7h-2v6z"/>
                    </svg>
                    Copiar Enlace
                </button>
                <button class="share-btn" onclick="shareWhatsApp()">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                        <path d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91 0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21 5.46 0 9.91-4.45 9.91-9.91 0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0012.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.225 8.225 0 012.41 5.83c0 4.54-3.7 8.23-8.24 8.23-1.48 0-2.93-.39-4.19-1.15l-.3-.17-3.12.82.83-3.04-.2-.32a8.188 8.188 0 01-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31-.22.25-.87.85-.87 2.07 0 1.22.89 2.39 1 2.56.14.17 1.76 2.67 4.25 3.73.59.27 1.05.42 1.41.53.59.19 1.13.16 1.56.1.48-.07 1.46-.6 1.67-1.18.21-.58.21-1.07.15-1.18-.07-.1-.23-.15-.48-.27-.25-.11-1.47-.72-1.69-.81-.23-.08-.37-.12-.56.12-.16.25-.64.81-.78.97-.15.17-.29.19-.53.07-.26-.13-1.06-.39-2-1.23-.74-.66-1.23-1.47-1.38-1.72-.14-.25-.02-.39.11-.51.11-.11.25-.29.37-.44.13-.14.17-.25.25-.41.08-.17.04-.31-.02-.43-.06-.11-.56-1.35-.77-1.84-.2-.48-.4-.42-.56-.43-.14 0-.3-.01-.46-.01z"/>
                    </svg>
                    Compartir por WhatsApp
                </button>
            </div>

            <button class="new-btn" onclick="location.reload()">Crear Nueva Invitación</button>
        </div>
    </div>

    <!-- Pantalla de Invitado -->
    <div id="guestScreen" class="screen">
        <div id="guestInvitationFull" class="guest-invitation-full"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
